# Core Django settings
DJANGO_ENV=development
DEBUG=true
SECRET_KEY=django-insecure-change-me
ALLOWED_HOSTS=localhost,127.0.0.1,korfbal.butrosgroot.com
CSRF_TRUSTED_ORIGINS=http://localhost:8001,https://korfbal.butrosgroot.com,https://web.korfbal.butrosgroot.com

# CORS (frontend runs on web.<domain>, API runs on <domain>)
# Comma-separated.
CORS_ALLOWED_ORIGINS=https://web.korfbal.butrosgroot.com
CORS_ALLOW_CREDENTIALS=true
SECURE_SSL_REDIRECT=false

# Runtime behaviour
RUNNER=
SESSION_COOKIE_SECURE=false
CSRF_COOKIE_SECURE=false

# Korfbal performance tuning (optional)
# Keep request latency predictable by default.
KORFBAL_ENABLE_IMPACT_AUTO_RECOMPUTE=false
# Hard-capped in code (max 3). Set >0 only when you explicitly want requests to
# self-heal missing/outdated impacts.
KORFBAL_IMPACT_AUTO_RECOMPUTE_LIMIT=0

# Slow SQL logging (opt-in). Logs the slowest queries per request.
KORFBAL_LOG_SLOW_DB_QUERIES=false
KORFBAL_SLOW_DB_QUERY_MS=200
# When enabled, slow query entries include SQL + params (staff-only endpoint).
KORFBAL_SLOW_DB_INCLUDE_SQL=false

# Slow request surfacing (opt-in).
# Adds lightweight timing headers and keeps a rolling in-cache buffer that can
# be viewed at: /api/debug/slow-requests/ (staff-only)
KORFBAL_LOG_SLOW_REQUESTS=false
KORFBAL_SLOW_REQUEST_MS=500
KORFBAL_SLOW_REQUEST_BUFFER_SIZE=200
KORFBAL_SLOW_REQUEST_BUFFER_TTL_S=86400

# Goal-song downloads (spotDL)
# spotDL can occasionally take a long time due to upstream rate limiting/search.
# Default in code is 900 seconds.
SPOTDL_DOWNLOAD_TIMEOUT_SECONDS=900

# If a download gets stuck (e.g. worker restarted), reclaim after this many seconds.
# Default in code is SPOTDL_DOWNLOAD_TIMEOUT_SECONDS + 60.
SPOTDL_STALE_IN_PROGRESS_SECONDS=960

# Database
POSTGRES_DB=korfbal
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432

# Redis / Cache
VALKEY_HOST=127.0.0.1
VALKEY_PORT=6379

# Email
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=true
EMAIL_USER=user@example.com
EMAIL_PASSWORD=change-me

# MinIO / S3
MINIO_URL=http://kwt-minio:9000
MINIO_PUBLIC_DOMAIN=localhost
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
STATIC_BUCKET=static
MEDIA_BUCKET=media
AWS_QUERYSTRING_AUTH=true

# Spotify integration
SPOTIFY_CLIENT_ID=
SPOTIFY_CLIENT_SECRET=
SPOTIFY_REDIRECT_URI=

# Web push notifications (PWA)
# Generate keys with e.g. https://github.com/web-push-libs/web-push#generate-vapid-keys
WEBPUSH_VAPID_PUBLIC_KEY=
WEBPUSH_VAPID_PRIVATE_KEY=
WEBPUSH_VAPID_SUBJECT=mailto:admin@example.com
WEBPUSH_TTL_SECONDS=3600
